<!-- Product Detail Start -->
<div class="product-detail">
  <div class="container-fluid">
  <%= form_for :cart, url: carts_path, remote: true do |f| %>
    <div class="row">
      <div class="col-lg-12">
        <div class="product-detail-top">
          <div class="row align-items-center">
            <div class="col-md-3 wapper-image">
              <%= image_tag @product.image, class: "image-product" if @product.image.attached? %>
            </div>
            <span id="total" style="display: none"><%= @product[:quatity] %> </span> 
            <div class="col-md-4">
              <div class="product-content">
                <div class="title">
                  <h2><%= @product[:name] %></h2>
                </div>
                <div class="ratting">
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                </div>
                <div class="price">
                  <h4><%= t ".title_price" %></h4>
                  <p><%= number_to_currency(@product[:price]) %></p>
                </div>
                <%= hidden_field_tag :message_add_cart, t("common.flash.add_cart_success") %>
                <%= hidden_field_tag :trigger_show_toast %>
                <%= hidden_field_tag :type_add_car, t("common.flash.success") %>
                <div class="quantity">
                  <h4><%= t ".title_quantity" %></h4>
                  <div class="qty qty-flex">
                    <span id="minus" class="btn btn-minus"><i class="fa fa-minus"></i></span>
                    <%= text_field_tag :quatity, "1", id: "count"%>
                    <span id="plus" class="btn btn-plus"><i class="fa fa-plus"></i></span>
                  </div>
                </div>

                <div>
                  <div class="product-price">
                    <%= hidden_field_tag :product_id, @product[:id] %>
                      <%= button_tag(class: "btn btn-buy") do %>
                        <%= t "static_pages.home.btn_buy" %>
                        <i class="fa fa-shopping-cart"></i>
                      <% end %>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-5 product-detail-bottom">
              <div class="tab-content">
                <div id="description" class="container tab-pane active">
                  <h4><%= t ".description" %></h4>
                  <p>
                    <%= @product[:description] %>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
                      <% end %>
  </div>
</div>
<!-- Product Detail End -->

<script>
  $(document).ready(function(){
    var minus = $("#minus")
    var plus = $("#plus")
   
  
    minus.click(function(){
      var count = $("#count")
      var counter =  +count.val()  - 1
      if(counter >= 0){
        count.val(counter)
      }
    })
    
    plus.click(function(){
      var total = $("#total").text()
      var count = $("#count")
      var counter =  +count.val()  + 1
      if(counter <= total){
        count.val(counter)
      }
    })
  })
</script>
